<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>瀑布流布局</title>
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>
    <div class="sidebar">
        <div class="closed">关闭</div>
        <ul>
            <li>
                <div class="label">col</div><input id="colInput" type="range" min="2" max="8" value="6">
            </li>
            <li>
                <div class="label">gutter</div><input id="gutterInput" type="range" min="5" max="40" value="20">
            </li>
        </ul>
    </div>
    <div class="container">
        <div class="img"><img src="./images/1.jpeg" alt=""></div>
        <div class="img"><img src="./images/2.jpeg" alt=""></div>
        <div class="img"><img src="./images/3.jpeg" alt=""></div>
        <div class="img"><img src="./images/4.jpeg" alt=""></div>
        <div class="img"><img src="./images/5.jpeg" alt=""></div>
        <div class="img"><img src="./images/6.jpeg" alt=""></div>
        <div class="img"><img src="./images/7.jpeg" alt=""></div>
        <div class="img"><img src="./images/8.jpeg" alt=""></div>
        <div class="img"><img src="./images/9.jpeg" alt=""></div>
        <div class="img"><img src="./images/10.jpeg" alt=""></div>
        <div class="img"><img src="./images/11.jpeg" alt=""></div>
        <div class="img"><img src="./images/12.jpeg" alt=""></div>
        <div class="img"><img src="./images/13.jpeg" alt=""></div>
        <div class="img"><img src="./images/14.jpeg" alt=""></div>
        <div class="img"><img src="./images/15.jpeg" alt=""></div>
    </div>
    <script src="./js/index.js"></script>
    <script>
        window.onload = function () {
            let wallpaper = new Wallpaper({
                el: '.container',
                itemEl: '.img',
                col: 6,
                gutter: 20
            })

            const sidebarDom = document.querySelector('.sidebar'),
                sideTracks = Array.from(document.querySelectorAll('input'))
            document.querySelector('.closed').addEventListener('click', function () {
                sidebarDom.classList.toggle('hide')
            })


            sideTracks.forEach(item => {
                item.addEventListener('change', inputTrackChange, false)
            })
            console.log(sideTracks[0].value);

            function inputTrackChange(e) {
                let _dom = e.target
                let _data = {
                    col: sideTracks[0].value * 1,
                    gutter: sideTracks[1].value * 1
                }
                if (_dom.id == 'colInput') _data['col'] = e.target.value * 1
                if (_dom.id == 'gutterInput') _data['gutter'] = e.target.value * 1
                wallpaper.render(_data)
            }
        }

    </script>
</body>

</html>